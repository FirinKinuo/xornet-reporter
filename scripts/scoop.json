{
  "$schema": "https://raw.githubusercontent.com/ScoopInstaller/Scoop/master/schema.json",
  "version": "0.13.2",
  "description": "The app that sends your data to Xornet servers for monitoring",
  "license": "GPL-3.0-or-later",
  "homepage": "https://xornet.cloud/",
  "url": "https://github.com/xornet-cloud/Reporter/releases/download/v0.13.2/xornet-reporter.exe",
  "bin": "xornet-reporter.exe",
  "depends": [
    "nssm",
    "sudo"
  ],
  "autoupdate": {
    "url": "https://github.com/xornet-cloud/Reporter/releases/download/v$version/xornet-reporter.exe",
    "pre_install": "sudo nssm stop 'Xornet Reporter (scoop)'"
  },
  "uninstaller": {
    "script": [
      "echo 'Stopping Xornet Reporter (scoop)'",
      "sudo nssm stop 'Xornet Reporter (scoop)'",
      "sudo nssm remove 'Xornet Reporter (scoop)' confirm"
    ]
  },
  "post_install": [
    "$token = Read-Host -Prompt 'Please enter your signup token: '",
    "$curPath = Get-Location",
    "cd ~/scoop/apps/xornet-reporter/0.13.2",
    "$xornetPath = Get-Location",
    "sudo nssm install 'Xornet Reporter (scoop)' $xornetPath/xornet-reporter.exe \"--silent\"",
    "xornet-reporter.exe -su $token",
    "sudo nssm start 'Xornet Reporter (scoop)'",
    "cd $curPath"
  ]
}